<div class="content">
  <mat-spinner *ngIf="!isLoaded" color="accent"></mat-spinner>
  <div *ngIf="isLoaded" class="posts">
    <mat-card *ngFor="let post of postsList$ | async" class="post-card">
      <mat-card-header class="post-card__header">
        <mat-card-title class="post-card__header-title">{{post.title}}</mat-card-title>
        <mat-card-subtitle *ngIf="!userPosts" class="post-card__header-subtitle">Author: <a class="card-link"
                                                                                            routerLink="/user/{{post.userId}}"
        >{{post?.user?.username}}</a>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="post-card__text">
        <p>{{post.body}}</p>
      </mat-card-content>
      <mat-expansion-panel class="comments" (opened)=getPostComments(post.id)>
        <mat-expansion-panel-header class="comments__header">
          <mat-panel-title class="comments__header-title">
            Comments
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-progress-bar color="accent" *ngIf="!post.comments" mode="indeterminate"></mat-progress-bar>
        <div *ngIf="!!post.comments" class="comments__content">
          <div class="comment" *ngFor="let comment of post.comments">
            <mat-icon class="comment__icon">account_circle</mat-icon>
            <div>
              <div class="comment__title">{{comment.name}}</div>
              <div class="comment__email"><{{comment.email}}></div>
              <p class="comment__body">{{comment.body}}</p>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-card>
  </div>
  <mat-paginator color="accent" [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>
